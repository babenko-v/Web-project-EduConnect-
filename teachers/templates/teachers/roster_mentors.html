{% extends "main/base.html" %}
{% load static %}
{% load teachers_tags %}

{% block content %}
    <head>
        <link rel="stylesheet" href="{% static "css/teachers.css" %}">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    </head>

    <body>

        <h2 class="am_teachers"><strong>Teachers/Mentors | {{ profiles_amount }}</strong></h2>
        <form class="filter_up" method="get">

            <!-- Фильтры -->

            <div class="dropdown d-inline-block me-2">
                <button class="btn btn-success dropdown-toggle choose_sort_btn" id="experienceDropdown"
                        data-bs-toggle="dropdown" aria-expanded="false">
                    Select type of studying
                </button>
                <ul class="dropdown-menu" aria-labelledby="experienceDropdown">
                    {% for mode in modes %}
                        <li>
                            <button class="dropdown-item" name="type_std" value="{{ mode.name_mode }}">
                                {{ mode.name_mode }} studying
                            </button>
                        </li>
                    {% endfor %}
                </ul>
            </div>

            <div class="dropdown d-inline-block">
                <button class="btn btn-success dropdown-toggle choose_sort_btn" type="button" id="locationDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    Choose location
                </button>
                <ul class="dropdown-menu" aria-labelledby="locationDropdown">
                    {% for loca in locality %}
                        <li><a class="dropdown-item" href="#" onclick="updateDropdown('locationDropdown', '{{ loca.name }}')">{{ loca.name }}</a></li>
                    {% endfor %}
                </ul>
            </div>

            <div class="dropdown d-inline-block sort_dropdown">
                <button class="btn btn-success dropdown-toggle choose_sort_btn" type="button" id="sortDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    Sort
                </button>
                <ul class="dropdown-menu" aria-labelledby="sortDropdown">
                    <li><a class="dropdown-item" href="#" onclick="updateDropdown('sortDropdown', 'A-Z')">A-Z</a></li>
                    <li><a class="dropdown-item" href="#" onclick="updateDropdown('sortDropdown', 'Z-A')">Z-A</a></li>
                    <li><a class="dropdown-item" href="#" onclick="updateDropdown('sortDropdown', 'By experience')">By experience</a></li>
                    <li><a class="dropdown-item" href="#" onclick="updateDropdown('sortDropdown', 'By age')">By age</a></li>
                </ul>
            </div>
        </form>

        <div class="row no-gutters">
            {% for info in profiles %}
                <div class="container col-md-8 mt-4 teacher_card">
                    <div class="mt-4 info_abt">
                        <h2 class="full_name">{{ info.first_name }} {{ info.last_name }}</h2>
                        <p class="spec"><strong>Specialization:</strong> {{ info.main_specialty }} teacher</p>
                        {% if info.age %}
                            <p class="age"><strong>Age:</strong> {{ info.age }}</p>
                        {% else %}
                            <p class="age"><strong>Age:</strong> Information not provided</p>
                        {% endif %}
                        <p class="exp"><strong>Location:</strong> {{ info.locations }}</p>
                        <button class="more_inf"><a href="{% url 'teachers:mentors' info.id %}" type="button">More info</a></button>
                    </div>
                </div>
            {% endfor %}

            <div class="col-md-4 categ_filt">
                <h5 class="header"><strong>Вчителі за напрямком:</strong></h5>
                <form method="get">
                <ul class="filter_right">
                    <li class="jj">
                        <button class='list-group-item category'  role="button">All mentors</button>
                    </li>

                    {% for spec in specializations %}
                        <li class="jj">
                            <button class='list-group-item category' name='type_speciality' value='{{ spec.name_spec }}' role="button">{{ spec.name_spec }}</button>
                        </li>
                    {% endfor %}

                </ul>
                </form>
            </div>
        </div>

        {% if profiles.has_other_pages %}
        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center my-4">
                <li class="page-item {% if not profiles.has_previous %}disabled{% endif %}">
                    <a class="page-link" href="?{% if profiles.has_previous %}{% change_params page=profiles.previous_page_number %}{% else %}#{% endif %}">Назад</a>
                </li>

                {% for page in profiles.paginator.page_range %}
                    {% if page >= profiles.number|add:-2 and page <= profiles.number|add:2 %}
                        <li class="page-item {% if profiles.number == page %} active {% endif %}">
                            <a class="page-link" href="?{% change_params page=page %}">{{ page }}</a>
                        </li>
                    {% endif %}
                {% endfor %}

                <li class="page-item {% if not profiles.has_next %}disabled{% endif %}">
                    <a class="page-link" href="?{% if profiles.has_next %}{% change_params page=profiles.next_page_number %}{% else %}#{% endif %}">Следующая</a>
                </li>
            </ul>
        </nav>
        {% endif %}

        <script src="{% static 'js/mentors.js' %}"></script>
    </body>
{% endblock %}
